"use strict";(globalThis.webpackChunktboh_doc=globalThis.webpackChunktboh_doc||[]).push([[7310],{556:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"introduction/requisitos-previos","title":"Requisitos previos","description":"Acceso administrativo inicial","source":"@site/docs/introduction/requisitos-previos.md","sourceDirName":"introduction","slug":"/introduction/requisitos-previos","permalink":"/docs/introduction/requisitos-previos","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"sidebar_label":"Requisitos previos","title":"Requisitos previos","hide_title":true},"sidebar":"tutorialSidebar","previous":{"title":"Casos de uso","permalink":"/docs/introduction/casos-de-uso"},"next":{"title":"Instalacion","permalink":"/docs/guia-inicio/instalacion"}}');var a=i(4848),r=i(8453);const o={sidebar_position:4,sidebar_label:"Requisitos previos",title:"Requisitos previos",hide_title:!0},t=void 0,c={},l=[{value:"Acceso administrativo inicial",id:"acceso-administrativo-inicial",level:2},{value:"Superusuario de plataforma",id:"superusuario-de-plataforma",level:3},{value:"Configuracion de clientes",id:"configuracion-de-clientes",level:3},{value:"Gestion de usuarios y roles",id:"gestion-de-usuarios-y-roles",level:2},{value:"Administradores",id:"administradores",level:3},{value:"Usuarios cliente",id:"usuarios-cliente",level:3},{value:"Variaciones de textos y catalogos base",id:"variaciones-de-textos-y-catalogos-base",level:2},{value:"Variaciones de cliente",id:"variaciones-de-cliente",level:3},{value:"Catalogos de preguntas y opciones",id:"catalogos-de-preguntas-y-opciones",level:3},{value:"Preparacion de encuestas",id:"preparacion-de-encuestas",level:2},{value:"Plantillas y secciones",id:"plantillas-y-secciones",level:3},{value:"Segmentacion y encuestados",id:"segmentacion-y-encuestados",level:3},{value:"Infraestructura y servicios externos",id:"infraestructura-y-servicios-externos",level:2},{value:"Base de datos y strings de conexion",id:"base-de-datos-y-strings-de-conexion",level:3},{value:"Servicios de terceros",id:"servicios-de-terceros",level:3},{value:"Automatizaciones y jobs",id:"automatizaciones-y-jobs",level:2},{value:"Azure Functions",id:"azure-functions",level:3},{value:"Monitoreo",id:"monitoreo",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"acceso-administrativo-inicial",children:"Acceso administrativo inicial"}),"\n",(0,a.jsx)(n.h3,{id:"superusuario-de-plataforma",children:"Superusuario de plataforma"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Contar con un usuario administrador creado en ",(0,a.jsx)(n.code,{children:"Users"})," (backend) o provisionado via seed, con rol ",(0,a.jsx)(n.code,{children:"Administrador"})," para poder ingresar al panel (",(0,a.jsx)(n.code,{children:"/dashboard"}),")."]}),"\n",(0,a.jsxs)(n.li,{children:["Este usuario debe tener una contrasena valida o haber pasado por el flujo OTP de ",(0,a.jsx)(n.code,{children:"ForgotPasswordService"})," para garantizar acceso seguro."]}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    A[Seed o registro en Users] --\x3e B{Rol asignado?}\n    B --\x3e|Si| C[Administrador]\n    C --\x3e D[OTP habilitado]\n    D --\x3e E[Acceso a /dashboard]\n    B --\x3e|No| F[Revisar permisos]"}),"\n",(0,a.jsx)(n.h3,{id:"configuracion-de-clientes",children:"Configuracion de clientes"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Crear al menos un registro en ",(0,a.jsx)(n.code,{children:"CtgClients"})," (o desde ",(0,a.jsx)(n.code,{children:"/dashboard/clients"}),") que incluya ",(0,a.jsx)(n.code,{children:"ClientName"}),", ",(0,a.jsx)(n.code,{children:"SurveysAvailable"})," y ",(0,a.jsx)(n.code,{children:"IdClientTextVariation"}),"."]}),"\n",(0,a.jsx)(n.li,{children:"Asignar el administrador inicial como responsable del cliente para ver sus encuestas y KPIs."}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    Admin[Administrador] --\x3e Create[Crear registro en CtgClients]\n    Create --\x3e Variation[Asignar IdClientTextVariation]\n    Variation --\x3e AssignUser[Vincular usuario cliente]\n    AssignUser --\x3e Ready[Cliente listo para operar]"}),"\n",(0,a.jsx)(n.h2,{id:"gestion-de-usuarios-y-roles",children:"Gestion de usuarios y roles"}),"\n",(0,a.jsx)(n.h3,{id:"administradores",children:"Administradores"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Solo el rol ",(0,a.jsx)(n.code,{children:"Administrador"})," puede crear y editar clientes, asignar variaciones de textos y dar de alta usuarios finales desde ",(0,a.jsx)(n.code,{children:"/dashboard/clients"})," o los endpoints del backend."]}),"\n",(0,a.jsx)(n.li,{children:"Debe garantizar la existencia de al menos un usuario cliente por cada organizacion y mantener habilitado el flujo OTP para recuperaciones."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"usuarios-cliente",children:"Usuarios cliente"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Registrar usuarios con rol ",(0,a.jsx)(n.code,{children:"Cliente"})," vinculandolos a su ",(0,a.jsx)(n.code,{children:"IdClient"}),". Ellos pueden iniciar sesion, crear encuestas, gestionar segmentaciones y revisar KPIs, pero no tienen permisos para crear otros usuarios ni nuevos clientes."]}),"\n",(0,a.jsxs)(n.li,{children:["Validar que el token JWT incluya ",(0,a.jsx)(n.code,{children:"idClient"})," y ",(0,a.jsx)(n.code,{children:"role=Cliente"})," para que el middleware permita acceso a ",(0,a.jsx)(n.code,{children:"/dashboard"})," unicamente a su organizacion."]}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"graph TD\n    AdminPerms[Administrador] --\x3e|Crea clientes y usuarios| ClientUser[Usuario Cliente]\n    ClientUser --\x3e|Puede| OPS[Crear encuestas / ver KPIs]\n    ClientUser -.->|No puede| CreateClients[Crear clientes]\n    ClientUser -.->|No puede| CreateUsers[Crear usuarios]"}),"\n",(0,a.jsx)(n.h2,{id:"variaciones-de-textos-y-catalogos-base",children:"Variaciones de textos y catalogos base"}),"\n",(0,a.jsx)(n.h3,{id:"variaciones-de-cliente",children:"Variaciones de cliente"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Definir las variaciones en ",(0,a.jsx)(n.code,{children:"CtgClientTextVariation"}),' (p.ej. "Preguntas Predeterminadas", "Ingenio San Antonio").']}),"\n",(0,a.jsxs)(n.li,{children:["Asociar cada cliente a la variacion correcta (",(0,a.jsx)(n.code,{children:"CtgClients.IdClientTextVariation"}),"). Si no hay personalizacion, usar la opcion predeterminada."]}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    Variations[CtgClientTextVariation] --\x3e|Seleccionar| Client(CtgClients)\n    Client --\x3e|Asignar Id| Frontend[Frontend]\n    Frontend --\x3e|Renderiza| Labels[Textos personalizados]"}),"\n",(0,a.jsx)(n.h3,{id:"catalogos-de-preguntas-y-opciones",children:"Catalogos de preguntas y opciones"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Asegurar que existan registros en ",(0,a.jsx)(n.code,{children:"CtgSurveySection"}),", ",(0,a.jsx)(n.code,{children:"SurveyQuestions"}),", ",(0,a.jsx)(n.code,{children:"CtgQuestionOptionTextVariation"})," y ",(0,a.jsx)(n.code,{children:"CtgSurveyQuestionTextVariation"})," para cada variacion. Esto permite que el front-end renderice el formulario con los labels correctos."]}),"\n",(0,a.jsxs)(n.li,{children:["Revisar que las tablas de segmentacion (",(0,a.jsx)(n.code,{children:"SvSegmentLevel1Country"}),"...",(0,a.jsx)(n.code,{children:"SvSegmentLevel7"}),") tengan datos iniciales si la encuesta requiere jerarquias predeterminadas."]}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    Sections[CtgSurveySection] --\x3e SectionQuestions[SurveySectionQuestions]\n    SectionQuestions --\x3e Questions[SurveyQuestions]\n    Questions --\x3e Texts[CtgQuestionOptionTextVariation / CtgSurveyQuestionTextVariation]\n    Texts --\x3e UI[Formulario en frontend]\n    Segments[SvSegmentLevel1-7] --\x3e UI"}),"\n",(0,a.jsx)(n.h2,{id:"preparacion-de-encuestas",children:"Preparacion de encuestas"}),"\n",(0,a.jsx)(n.h3,{id:"plantillas-y-secciones",children:"Plantillas y secciones"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Disponer de secciones y preguntas listas en la base (tablas ",(0,a.jsx)(n.code,{children:"ClientSurveySections"}),", ",(0,a.jsx)(n.code,{children:"SurveySectionQuestions"}),") para que el usuario solo seleccione la configuracion desde el UI."]}),"\n",(0,a.jsxs)(n.li,{children:["Configurar metas (",(0,a.jsx)(n.code,{children:"QttyGoal"}),"), fechas (",(0,a.jsx)(n.code,{children:"InitDate"}),", ",(0,a.jsx)(n.code,{children:"EndDate"}),") y tipo (",(0,a.jsx)(n.code,{children:"IdSurveyType"}),") antes de lanzar la campana."]}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Admin\n    participant DB\n    participant UI\n    Admin->>DB: Define ClientSurveySections / SurveySectionQuestions\n    Admin->>UI: Ajusta QttyGoal, fechas, tipo\n    UI->>DB: Guarda configuracion"}),"\n",(0,a.jsx)(n.h3,{id:"segmentacion-y-encuestados",children:"Segmentacion y encuestados"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Si la encuesta sera nombrada, cargar datos en ",(0,a.jsx)(n.code,{children:"SurveyAccess"}),' (o usar el modulo "Gestionar encuestados") para asociar correos/nombres.']}),"\n",(0,a.jsxs)(n.li,{children:["Si sera anonima, verificar que exista al menos un enlace en ",(0,a.jsx)(n.code,{children:"SurveyRespondants"})," o que los jobs puedan generarlo."]}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    Start[Tipo de encuesta] --\x3e|Named| Access[SurveyAccess con correos]\n    Start --\x3e|Anonymous| Links[SurveyRespondants con enlaces]\n    Access --\x3e Dashboard[Modulo Gestionar encuestados]\n    Links --\x3e Dashboard"}),"\n",(0,a.jsx)(n.h2,{id:"infraestructura-y-servicios-externos",children:"Infraestructura y servicios externos"}),"\n",(0,a.jsx)(n.h3,{id:"base-de-datos-y-strings-de-conexion",children:"Base de datos y strings de conexion"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Definir ",(0,a.jsx)(n.code,{children:"DefaultConnection"})," (jobs) y ",(0,a.jsx)(n.code,{children:"DbConnectionString"})," (backend) apuntando a la instancia SQL con todas las tablas creadas (",(0,a.jsx)(n.code,{children:"tboh-database.sql"}),")."]}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    Secrets[Variables de entorno] --\x3e Backend[Backend .NET]\n    Secrets --\x3e Jobs[Azure Functions]\n    Backend --\x3e SQL[(SQL Server)]\n    Jobs --\x3e SQL"}),"\n",(0,a.jsx)(n.h3,{id:"servicios-de-terceros",children:"Servicios de terceros"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Configurar credenciales para Twilio OTP (",(0,a.jsx)(n.code,{children:"IForgotPasswordService"}),"), almacenamiento de archivos (si se usan exportaciones) y cualquier API de autenticacion necesaria."]}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    OTP[Twilio OTP] --\x3e Backend\n    Storage[Storage/Export] --\x3e Backend\n    Backend --\x3e Users[Usuarios]"}),"\n",(0,a.jsx)(n.h2,{id:"automatizaciones-y-jobs",children:"Automatizaciones y jobs"}),"\n",(0,a.jsx)(n.h3,{id:"azure-functions",children:"Azure Functions"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Implementar ",(0,a.jsx)(n.code,{children:"tboh-jobs"})," en Azure Functions o entorno compatible para ejecutar ",(0,a.jsx)(n.code,{children:"ActualizarEstadosEncuestasFunction"})," y ",(0,a.jsx)(n.code,{children:"SurveyRulesHttpTrigger"}),"."]}),"\n",(0,a.jsx)(n.li,{children:"Asegurar variables de entorno (connection strings, Application Insights) para que los jobs puedan conectar a la misma base."}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    Timer[TimerTrigger 0 0 8-19/2 * * 1-5] --\x3e Jobs[ActualizarEstadosEncuestas]\n    Http[SurveyRulesHttpTrigger] --\x3e Jobs\n    Jobs --\x3e SQL[(SQL Server)]\n    SQL --\x3e Dashboard"}),"\n",(0,a.jsx)(n.h3,{id:"monitoreo",children:"Monitoreo"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Tener habilitado logging y alertas para detectar fallos en recalculo de estados, envios de OTP o errores de autenticacion."}),"\n"]}),"\n",(0,a.jsx)(n.mermaid,{value:"flowchart LR\n    Logs[Application Insights / Logging] --\x3e Alerts[Alertas]\n    Alerts --\x3e Equipo[Equipo Operaciones]\n    Equipo --\x3e Acciones[Corregir incidencias]"})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var s=i(6540);const a={},r=s.createContext(a);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);