"use strict";(globalThis.webpackChunktboh_doc=globalThis.webpackChunktboh_doc||[]).push([[388],{2519:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>l,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"api/endpoints","title":"Catalogo de Endpoints","description":"Base URL Bearer  emitido por el endpoint de login.","source":"@site/docs/api/endpoints.md","sourceDirName":"api","slug":"/api/endpoints","permalink":"/tboh-doc/docs/api/endpoints","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"Endpoints","title":"Catalogo de Endpoints","hide_title":false},"sidebar":"tutorialSidebar","previous":{"title":"Autenticaci\xf3n","permalink":"/tboh-doc/docs/api/autenticacion"},"next":{"title":"Ejemplos de Uso","permalink":"/tboh-doc/docs/api/ejemplos-de-uso"}}');var d=s(4848),r=s(8453);const l={sidebar_position:3,sidebar_label:"Endpoints",title:"Catalogo de Endpoints",hide_title:!1},c=void 0,o={},a=[{value:"Autenticacion",id:"autenticacion",level:2},{value:"<code>POST /api/Login</code>",id:"post-apilogin",level:3},{value:"<code>POST /api/Login/EncryptPassword</code>",id:"post-apiloginencryptpassword",level:3},{value:"<code>POST /api/ForgotPassword/SendOtp</code>",id:"post-apiforgotpasswordsendotp",level:3},{value:"<code>POST /api/ForgotPassword/ValidateOtp</code>",id:"post-apiforgotpasswordvalidateotp",level:3},{value:"<code>POST /api/ForgotPassword/UpdatePassword</code>",id:"post-apiforgotpasswordupdatepassword",level:3},{value:"Usuarios y roles",id:"usuarios-y-roles",level:2},{value:"<code>POST /api/users/CreateUser</code>",id:"post-apiuserscreateuser",level:3},{value:"<code>GET /api/users/GetUsers</code>",id:"get-apiusersgetusers",level:3},{value:"<code>PUT /api/users/updateUser/{id}</code>",id:"put-apiusersupdateuserid",level:3},{value:"<code>GET /api/UserCatalog/roles</code>",id:"get-apiusercatalogroles",level:3},{value:"<code>GET /api/UserCatalog/clients</code>",id:"get-apiusercatalogclients",level:3},{value:"Administracion de clientes",id:"administracion-de-clientes",level:2},{value:"<code>GET /api/ClientInformation/GetClients</code>",id:"get-apiclientinformationgetclients",level:3},{value:"<code>GET /api/ClientInformation/GetActiveClientsCatalog</code>",id:"get-apiclientinformationgetactiveclientscatalog",level:3},{value:"<code>GET /api/ClientInformation/GetClientById/{clientId}</code>",id:"get-apiclientinformationgetclientbyidclientid",level:3},{value:"<code>POST /api/ClientInformation/CreateClient</code>",id:"post-apiclientinformationcreateclient",level:3},{value:"<code>PUT /api/ClientInformation/UpdateClient/{id}</code>",id:"put-apiclientinformationupdateclientid",level:3},{value:"<code>PUT /api/ClientInformation/toggle-status/{id}</code>",id:"put-apiclientinformationtoggle-statusid",level:3},{value:"<code>DELETE /api/ClientInformation/DeleteClient/{idClient}</code>",id:"delete-apiclientinformationdeleteclientidclient",level:3},{value:"<code>GET /api/ClientCatalog/client-variations</code>",id:"get-apiclientcatalogclient-variations",level:3},{value:"Encuestas (SurveyController)",id:"encuestas-surveycontroller",level:2},{value:"<code>GET /api/Survey/access/{accessIdEncrypted}</code>",id:"get-apisurveyaccessaccessidencrypted",level:3},{value:"<code>GET /api/Survey/GetSurveys/{idClient}</code>",id:"get-apisurveygetsurveysidclient",level:3},{value:"<code>POST /api/Survey/CreateSurvey</code>",id:"post-apisurveycreatesurvey",level:3},{value:"<code>GET /api/Survey/GetSurveyDetailsById/{idClientSurveys}</code>",id:"get-apisurveygetsurveydetailsbyididclientsurveys",level:3},{value:"<code>POST /api/Survey/SaveSurveyAnswers/{accessIdEncrypted}</code>",id:"post-apisurveysavesurveyanswersaccessidencrypted",level:3},{value:"<code>DELETE /api/Survey/DeleteSurvey/{idSurvey}</code>",id:"delete-apisurveydeletesurveyidsurvey",level:3},{value:"Actualizaciones parciales",id:"actualizaciones-parciales",level:3},{value:"Segmentacion organizacional",id:"segmentacion-organizacional",level:2},{value:"Creacion (<code>POST</code>)",id:"creacion-post",level:3},{value:"Lectura (<code>GET</code>)",id:"lectura-get",level:3},{value:"Actualizacion (<code>PUT</code>)",id:"actualizacion-put",level:3},{value:"Eliminacion (<code>DELETE</code>)",id:"eliminacion-delete",level:3},{value:"Gestion de encuestados (SurveyUserAccessController)",id:"gestion-de-encuestados-surveyuseraccesscontroller",level:2},{value:"<code>DELETE /api/SurveyUserAccess/delete?userId={guid}</code>",id:"delete-apisurveyuseraccessdeleteuseridguid",level:3},{value:"<code>POST /api/SurveyUserAccess/upload-excel</code>",id:"post-apisurveyuseraccessupload-excel",level:3},{value:"<code>POST /api/SurveyUserAccess/add-manual</code>",id:"post-apisurveyuseraccessadd-manual",level:3},{value:"<code>GET /api/SurveyUserAccess/get-respondants</code>",id:"get-apisurveyuseraccessget-respondants",level:3},{value:"<code>GET /api/SurveyUserAccess/export-excel?idClientSurveys={id}</code>",id:"get-apisurveyuseraccessexport-excelidclientsurveysid",level:3},{value:"Resultados y analitica (<code>SurveyResultsController</code>)",id:"resultados-y-analitica-surveyresultscontroller",level:2},{value:"Indicadores (POST + filtros)",id:"indicadores-post--filtros",level:3},{value:"Descargas/consultas auxiliares",id:"descargasconsultas-auxiliares",level:3},{value:"Resultados (descarga de datos brutos)",id:"resultados-descarga-de-datos-brutos",level:2},{value:"<code>GET /api/survey-results/GetEmotionAnalisysQuestions</code>",id:"get-apisurvey-resultsgetemotionanalisysquestions",level:3},{value:"<code>GET /api/survey-results/download-Survey-Data-excel</code>",id:"get-apisurvey-resultsdownload-survey-data-excel",level:3},{value:"Catalogos y filtros miscelaneos",id:"catalogos-y-filtros-miscelaneos",level:2},{value:"Buenas practicas para consumir la API",id:"buenas-practicas-para-consumir-la-api",level:2}];function t(e){const i={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(i.blockquote,{children:["\n",(0,d.jsxs)(i.p,{children:["Base URL: ",(0,d.jsx)(i.code,{children:"/api"}),". Todos los endpoints retornan un envoltorio ",(0,d.jsx)(i.code,{children:"ResponseDTO"})," con ",(0,d.jsx)(i.code,{children:"status"}),", ",(0,d.jsx)(i.code,{children:"message"})," y ",(0,d.jsx)(i.code,{children:"data"}),", salvo cuando se devuelven archivos binarios. Cuando un controlador usa ",(0,d.jsx)(i.code,{children:"[ValidateToken]"}),", debe enviarse ",(0,d.jsx)(i.code,{children:"Authorization: Bearer <JWT>"})," emitido por el endpoint de login."]}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"autenticacion",children:"Autenticacion"}),"\n",(0,d.jsx)(i.h3,{id:"post-apilogin",children:(0,d.jsx)(i.code,{children:"POST /api/Login"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body (JSON)"})," ",(0,d.jsx)(i.code,{children:"LoginRequestDto"}),":","\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-json",children:'{ "email": "usuario@dominio.com", "password": "string" }\n'})}),"\n"]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Respuesta"}),": ",(0,d.jsx)(i.code,{children:"LoginResponseDTO"})," con token JWT y datos de rol/cliente."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apiloginencryptpassword",children:(0,d.jsx)(i.code,{children:"POST /api/Login/EncryptPassword"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"}),": cadena ",(0,d.jsx)(i.code,{children:"password"})," (texto plano) para obtener la version cifrada (uso interno)."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apiforgotpasswordsendotp",children:(0,d.jsx)(i.code,{children:"POST /api/ForgotPassword/SendOtp"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"ForgotPasswordRequestDto"}),":","\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-json",children:'{ "email": "usuario@dominio.com" }\n'})}),"\n"]}),"\n",(0,d.jsx)(i.li,{children:"Envia OTP via Twilio al correo/usuario."}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apiforgotpasswordvalidateotp",children:(0,d.jsx)(i.code,{children:"POST /api/ForgotPassword/ValidateOtp"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"ValidateOtpRequestDto"}),":","\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-json",children:'{ "email": "usuario@dominio.com", "otp": "123456" }\n'})}),"\n"]}),"\n",(0,d.jsx)(i.li,{children:"Devuelve token temporal de recuperacion si el OTP coincide."}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apiforgotpasswordupdatepassword",children:(0,d.jsx)(i.code,{children:"POST /api/ForgotPassword/UpdatePassword"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": requiere token de recuperacion (",(0,d.jsx)(i.code,{children:'ValidateToken("Recovery")'}),")."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"}),": cadena ",(0,d.jsx)(i.code,{children:"password"})," con la nueva contrasena."]}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"usuarios-y-roles",children:"Usuarios y roles"}),"\n",(0,d.jsx)(i.h3,{id:"post-apiuserscreateuser",children:(0,d.jsx)(i.code,{children:"POST /api/users/CreateUser"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"UserCreateDto"}),":","\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-json",children:'{\n  "name": "Nombre",\n  "lastName": "Apellido",\n  "email": "mail@dominio.com",\n  "password": "Temporal123",\n  "idClient": 10,          // opcional para rol Cliente\n  "idRole": 1              // Id del catalogo de roles\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apiusersgetusers",children:(0,d.jsx)(i.code,{children:"GET /api/users/GetUsers"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:["Listado completo (",(0,d.jsx)(i.code,{children:"UserListDto"}),")."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"put-apiusersupdateuserid",children:(0,d.jsx)(i.code,{children:"PUT /api/users/updateUser/{id}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"UpdateUserDto"})," (nombre, idClient, password opcional, idRole, status)."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apiusercatalogroles",children:(0,d.jsx)(i.code,{children:"GET /api/UserCatalog/roles"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsx)(i.li,{children:"Devuelve catalogo de roles."}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apiusercatalogclients",children:(0,d.jsx)(i.code,{children:"GET /api/UserCatalog/clients"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsx)(i.li,{children:"Catalogo compacto de clientes disponibles para asignar a usuarios."}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"administracion-de-clientes",children:"Administracion de clientes"}),"\n",(0,d.jsx)(i.h3,{id:"get-apiclientinformationgetclients",children:(0,d.jsx)(i.code,{children:"GET /api/ClientInformation/GetClients"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:["Lista extendida de clientes (",(0,d.jsx)(i.code,{children:"GetAllClientsDto"}),")."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apiclientinformationgetactiveclientscatalog",children:(0,d.jsx)(i.code,{children:"GET /api/ClientInformation/GetActiveClientsCatalog"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"."]}),"\n",(0,d.jsx)(i.li,{children:"Solo clientes activos (Id y variacion de textos)."}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apiclientinformationgetclientbyidclientid",children:(0,d.jsx)(i.code,{children:"GET /api/ClientInformation/GetClientById/{clientId}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apiclientinformationcreateclient",children:(0,d.jsx)(i.code,{children:"POST /api/ClientInformation/CreateClient"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"ClientDto"})," (nombre, ",(0,d.jsx)(i.code,{children:"surveysAvailable"}),", ",(0,d.jsx)(i.code,{children:"idClientLabelVariation"}),")."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"put-apiclientinformationupdateclientid",children:(0,d.jsx)(i.code,{children:"PUT /api/ClientInformation/UpdateClient/{id}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"ClientDto"})," (mismos campos, actualiza cliente existente)."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"put-apiclientinformationtoggle-statusid",children:(0,d.jsx)(i.code,{children:"PUT /api/ClientInformation/toggle-status/{id}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:["Cambia ",(0,d.jsx)(i.code,{children:"Status"})," del cliente (activo/inactivo)."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"delete-apiclientinformationdeleteclientidclient",children:(0,d.jsx)(i.code,{children:"DELETE /api/ClientInformation/DeleteClient/{idClient}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apiclientcatalogclient-variations",children:(0,d.jsx)(i.code,{children:"GET /api/ClientCatalog/client-variations"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"}),"."]}),"\n",(0,d.jsx)(i.li,{children:"Catalogo de textos/variaciones (ej. default vs Ingenio)."}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"encuestas-surveycontroller",children:"Encuestas (SurveyController)"}),"\n",(0,d.jsx)(i.h3,{id:"get-apisurveyaccessaccessidencrypted",children:(0,d.jsx)(i.code,{children:"GET /api/Survey/access/{accessIdEncrypted}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:["Devuelve estructura completa de la encuesta para el encuestado identificado por el ",(0,d.jsx)(i.code,{children:"accessIdEncrypted"})," (GUID cifrado). Si la encuesta es nombrada, valida que no se haya llenado antes."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apisurveygetsurveysidclient",children:(0,d.jsx)(i.code,{children:"GET /api/Survey/GetSurveys/{idClient}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"."]}),"\n",(0,d.jsx)(i.li,{children:"Lista resumida de encuestas del cliente."}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apisurveycreatesurvey",children:(0,d.jsx)(i.code,{children:"POST /api/Survey/CreateSurvey"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"CreateSurveyDto"}),":","\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-json",children:'{\n  "idClient": 10,\n  "name": "Diagnostico Q1",\n  "qttyGoal": 500,\n  "initDate": "2025-01-15T00:00:00Z",\n  "endDate": "2025-02-28T00:00:00Z",\n  "surveyTypeId": 1,\n  "idSurveySections": [1,2,3]\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apisurveygetsurveydetailsbyididclientsurveys",children:(0,d.jsx)(i.code,{children:"GET /api/Survey/GetSurveyDetailsById/{idClientSurveys}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:["Devuelve ",(0,d.jsx)(i.code,{children:"SurveyDetailDto"})," con secciones, segmentaciones y reglas activas."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apisurveysavesurveyanswersaccessidencrypted",children:(0,d.jsx)(i.code,{children:"POST /api/Survey/SaveSurveyAnswers/{accessIdEncrypted}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"SaveSurveyAnswersDto"}),":","\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{className:"language-json",children:'{\n  "clientSurveyId": 12,\n  "personalData": {\n    "genderId": 1,\n    "workseniorityId": 2,\n    "ageRangeId": 3,\n    "countryId": 5,\n    "departmentId": 9,\n    "managementId": 21,\n    "level4Id": 33\n  },\n  "survey": [\n    {\n      "clientSurveySectionsId": 7,\n      "questions": [\n        { "questionId": 101, "optionAnswerId": 3 },\n        { "questionId": 102, "openAnswer": "Comentario" }\n      ]\n    }\n  ]\n}\n'})}),"\n"]}),"\n",(0,d.jsx)(i.li,{children:"Marca como respondida si la encuesta es nombrada."}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"delete-apisurveydeletesurveyidsurvey",children:(0,d.jsx)(i.code,{children:"DELETE /api/Survey/DeleteSurvey/{idSurvey}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"actualizaciones-parciales",children:"Actualizaciones parciales"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsxs)(i.strong,{children:["PUT ",(0,d.jsx)(i.code,{children:"/api/Survey/UpdateSurveyName/{id}"})]})," \u2014 cuerpo ",(0,d.jsx)(i.code,{children:"UpdateSurveyNameDTO { name, idCurrentSurveyStatus }"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsxs)(i.strong,{children:["PUT ",(0,d.jsx)(i.code,{children:"/api/Survey/UpdateSurveyDates/{id}"})]})," \u2014 ",(0,d.jsx)(i.code,{children:"UpdateSurveyDatesDTO { initDate, endDate, idCurrentSurveyStatus }"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsxs)(i.strong,{children:["PUT ",(0,d.jsx)(i.code,{children:"/api/Survey/UpdateSurveySections/{id}"})]})," \u2014 ",(0,d.jsx)(i.code,{children:"UpdateSurveySectionsDTO { idSections[], idCurrentSurveyStatus }"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsxs)(i.strong,{children:["PUT ",(0,d.jsx)(i.code,{children:"/api/Survey/UpdateSurveyQttyGoal/{id}"})]})," \u2014 ",(0,d.jsx)(i.code,{children:"UpdateSurveyQttyGoalDTO { qttyGoal }"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsxs)(i.strong,{children:["PUT ",(0,d.jsx)(i.code,{children:"/api/Survey/UpdateSurveyType/{id}"})]})," \u2014 ",(0,d.jsx)(i.code,{children:"UpdateSuveyTypeDTO { idSurveyType, idCurrentSurveyStatus }"}),"."]}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"segmentacion-organizacional",children:"Segmentacion organizacional"}),"\n",(0,d.jsxs)(i.p,{children:["Los endpoints viven en ",(0,d.jsx)(i.code,{children:"SurveySegmentationController"})," y requieren token (",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"). Todos devuelven ",(0,d.jsx)(i.code,{children:"ResponseDTO"})," con la entidad creada/actualizada."]}),"\n",(0,d.jsxs)(i.h3,{id:"creacion-post",children:["Creacion (",(0,d.jsx)(i.code,{children:"POST"}),")"]}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Ruta"}),(0,d.jsx)(i.th,{children:"Body"}),(0,d.jsx)(i.th,{children:"Descripcion"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"/api/SurveySegmentation/country"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"CountryRequestDto { idClientSurvey, name }"})}),(0,d.jsx)(i.td,{children:"Nivel 1 (pais)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"/department"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"DepartmentRequestDto { idClientSurvey, name, idCountry }"})}),(0,d.jsx)(i.td,{children:"Nivel 2."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"/management"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"ManagementRequestDto { idClientSurvey, name, idDepartment }"})}),(0,d.jsx)(i.td,{children:"Nivel 3."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"/chief"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"ChiefRequestDto { idClientSurvey, name, idManagement }"})}),(0,d.jsx)(i.td,{children:"Nivel 4."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"/responsible"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"ResponsibleRequestDto { idClientSurvey, name, idChief }"})}),(0,d.jsx)(i.td,{children:"Nivel 5."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"/supervisor"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"SupervisorRequestDto { idClientSurvey, name, idResponsible }"})}),(0,d.jsx)(i.td,{children:"Nivel 6."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"/auxiliary"})}),(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"AuxiliaryRequestDto { idClientSurvey, name, idSupervisor }"})}),(0,d.jsx)(i.td,{children:"Nivel 7."})]})]})]}),"\n",(0,d.jsxs)(i.h3,{id:"lectura-get",children:["Lectura (",(0,d.jsx)(i.code,{children:"GET"}),")"]}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"/api/SurveySegmentation/countries/{idClientSurvey}"})," (similar para ",(0,d.jsx)(i.code,{children:"departments"}),", ",(0,d.jsx)(i.code,{children:"managements"}),", ",(0,d.jsx)(i.code,{children:"chiefs"}),", ",(0,d.jsx)(i.code,{children:"responsibles"}),", ",(0,d.jsx)(i.code,{children:"supervisors"}),", ",(0,d.jsx)(i.code,{children:"auxiliaries"}),") devuelven las jerarquias existentes."]}),"\n"]}),"\n",(0,d.jsxs)(i.h3,{id:"actualizacion-put",children:["Actualizacion (",(0,d.jsx)(i.code,{children:"PUT"}),")"]}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"/api/SurveySegmentation/actualizacion/segmentacion/{level}/{id}"})," recibe un JSON ",(0,d.jsx)(i.code,{children:"UpdateSegmentDto { name }"})," (el controlador valida el campo ",(0,d.jsx)(i.code,{children:"Name"}),") y dispara el job para recalcular reglas."]}),"\n"]}),"\n",(0,d.jsxs)(i.h3,{id:"eliminacion-delete",children:["Eliminacion (",(0,d.jsx)(i.code,{children:"DELETE"}),")"]}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"/api/SurveySegmentation/{level}/{id}"})," borra el nodo indicado (country, department, management, chief, responsible, supervisor, auxiliary)."]}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"gestion-de-encuestados-surveyuseraccesscontroller",children:"Gestion de encuestados (SurveyUserAccessController)"}),"\n",(0,d.jsx)(i.h3,{id:"delete-apisurveyuseraccessdeleteuseridguid",children:(0,d.jsx)(i.code,{children:"DELETE /api/SurveyUserAccess/delete?userId={guid}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"."]}),"\n",(0,d.jsx)(i.li,{children:"Elimina al encuestado y recalcula reglas."}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apisurveyuseraccessupload-excel",children:(0,d.jsx)(i.code,{children:"POST /api/SurveyUserAccess/upload-excel"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Auth"}),": ",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Content-Type"}),": ",(0,d.jsx)(i.code,{children:"multipart/form-data"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:["Campos: ",(0,d.jsx)(i.code,{children:"file"})," (xlsx con columnas esperadas) y ",(0,d.jsx)(i.code,{children:"idClientSurveys"}),"."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"post-apisurveyuseraccessadd-manual",children:(0,d.jsx)(i.code,{children:"POST /api/SurveyUserAccess/add-manual"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Body"})," ",(0,d.jsx)(i.code,{children:"SurveyUserAccessManualDto { name, lastName, email, idClientSurveys }"}),"."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apisurveyuseraccessget-respondants",children:(0,d.jsx)(i.code,{children:"GET /api/SurveyUserAccess/get-respondants"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:["Query params: ",(0,d.jsx)(i.code,{children:"idClientSurveys"}),", ",(0,d.jsx)(i.code,{children:"pageIndex"}),", ",(0,d.jsx)(i.code,{children:"pageSize"}),", ",(0,d.jsx)(i.code,{children:"searchTerm"}),", ",(0,d.jsx)(i.code,{children:"sortOrder"}),"."]}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apisurveyuseraccessexport-excelidclientsurveysid",children:(0,d.jsx)(i.code,{children:"GET /api/SurveyUserAccess/export-excel?idClientSurveys={id}"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsx)(i.li,{children:"Descarga Excel con los encuestados cargados."}),"\n"]}),"\n",(0,d.jsxs)(i.h2,{id:"resultados-y-analitica-surveyresultscontroller",children:["Resultados y analitica (",(0,d.jsx)(i.code,{children:"SurveyResultsController"}),")"]}),"\n",(0,d.jsxs)(i.p,{children:["Todos los endpoints requieren token (",(0,d.jsx)(i.code,{children:"Administrador"})," o ",(0,d.jsx)(i.code,{children:"Cliente"}),") salvo donde se especifique."]}),"\n",(0,d.jsx)(i.h3,{id:"indicadores-post--filtros",children:"Indicadores (POST + filtros)"}),"\n",(0,d.jsxs)(i.p,{children:["Cada endpoint recibe ",(0,d.jsx)(i.code,{children:"SurveyFilterDto"})," en el body (listas de IDs para genero, edad, seniority y niveles 1-7)."]}),"\n",(0,d.jsxs)(i.table,{children:[(0,d.jsx)(i.thead,{children:(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.th,{children:"Ruta"}),(0,d.jsx)(i.th,{children:"Descripcion"})]})}),(0,d.jsxs)(i.tbody,{children:[(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"POST /api/survey-results/LQAResults/{clientSurveyId}"})}),(0,d.jsx)(i.td,{children:"Indice Life Quality."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"POST /api/survey-results/ENPSResults/{clientSurveyId}"})}),(0,d.jsx)(i.td,{children:"ENPS."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"POST /api/survey-results/experience-analysis-results/{clientSurveyId}"})}),(0,d.jsx)(i.td,{children:"Analisis de experiencia."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"POST /api/survey-results/EmotionAnalisysResults/{clientSurveyId}?textVariationId=x&questionId=y"})}),(0,d.jsx)(i.td,{children:"Analisis de emociones por variacion textual (permite filtrar pregunta)."})]}),(0,d.jsxs)(i.tr,{children:[(0,d.jsx)(i.td,{children:(0,d.jsx)(i.code,{children:"POST /api/survey-results/happiness-results/{clientSurveyId}"})}),(0,d.jsx)(i.td,{children:"Indicador de felicidad."})]})]})]}),"\n",(0,d.jsx)(i.h3,{id:"descargasconsultas-auxiliares",children:"Descargas/consultas auxiliares"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"GET /api/survey-results/DownloadEmotionAnalisysDataExcel/{clientSurveyId}?clientTextVariationId=&clientName="})," (solo ",(0,d.jsx)(i.code,{children:"Administrador"}),")."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"GET /api/survey-results/DownloadDemographicDataExcel/{clientSurveyId}"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"GET /api/survey-results/GetEmotionAnalisysQuestions?textVariationId="})," devuelve catalogo de preguntas abiertas de emociones."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"GET /api/survey-results/download-Survey-Data-excel?idClientSurvey=&idTextVariation="})," exporta respuestas completas."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"GET /api/survey-results/GetSurveyOpenAnswerQuestionsExcel/{clientSurveyId}?textVariationId="})," descarga solo preguntas abiertas."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"GET /api/survey-results/downloadPptx/{clientSurveyId}?clientTextVariation=&surveyName="})," genera la presentacion ejecutiva (solo ",(0,d.jsx)(i.code,{children:"Administrador"}),")."]}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"resultados-descarga-de-datos-brutos",children:"Resultados (descarga de datos brutos)"}),"\n",(0,d.jsx)(i.h3,{id:"get-apisurvey-resultsgetemotionanalisysquestions",children:(0,d.jsx)(i.code,{children:"GET /api/survey-results/GetEmotionAnalisysQuestions"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Query"})," ",(0,d.jsx)(i.code,{children:"textVariationId"}),"."]}),"\n",(0,d.jsx)(i.li,{children:"Util para poblar selectores en el frontend antes de pedir resultados de emociones."}),"\n"]}),"\n",(0,d.jsx)(i.h3,{id:"get-apisurvey-resultsdownload-survey-data-excel",children:(0,d.jsx)(i.code,{children:"GET /api/survey-results/download-Survey-Data-excel"})}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.strong,{children:"Query"})," ",(0,d.jsx)(i.code,{children:"idClientSurvey"}),", ",(0,d.jsx)(i.code,{children:"idTextVariation"}),"."]}),"\n",(0,d.jsx)(i.li,{children:"Exporta todas las respuestas (incluye alias \u201cUsuario anonimo\u201d para encuestas anonimas)."}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"catalogos-y-filtros-miscelaneos",children:"Catalogos y filtros miscelaneos"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"GET /api/ClientCatalog/client-variations"})," \u2192 variaciones de textos."]}),"\n",(0,d.jsxs)(i.li,{children:[(0,d.jsx)(i.code,{children:"GET /api/UserCatalog/roles"})," y ",(0,d.jsx)(i.code,{children:"GET /api/UserCatalog/clients"})," \u2192 catalogos para formularios."]}),"\n"]}),"\n",(0,d.jsx)(i.h2,{id:"buenas-practicas-para-consumir-la-api",children:"Buenas practicas para consumir la API"}),"\n",(0,d.jsxs)(i.ul,{children:["\n",(0,d.jsxs)(i.li,{children:["Incluya ",(0,d.jsx)(i.code,{children:"Authorization: Bearer <token>"})," siempre que un endpoint utilice ",(0,d.jsx)(i.code,{children:"[ValidateToken]"}),". Para saber que roles acepta, revise la lista de parametros del atributo (ej. ",(0,d.jsx)(i.code,{children:'"Administrador", "Cliente"'}),")."]}),"\n",(0,d.jsxs)(i.li,{children:["Todos los metodos devuelven codigos HTTP semanticos (",(0,d.jsx)(i.code,{children:"200"}),", ",(0,d.jsx)(i.code,{children:"400"}),", ",(0,d.jsx)(i.code,{children:"401"}),", ",(0,d.jsx)(i.code,{children:"403"}),", ",(0,d.jsx)(i.code,{children:"404"}),", ",(0,d.jsx)(i.code,{children:"500"}),"). Verifique ",(0,d.jsx)(i.code,{children:"response.status"})," y ",(0,d.jsx)(i.code,{children:"response.message"})," antes de procesar ",(0,d.jsx)(i.code,{children:"data"}),"."]}),"\n",(0,d.jsxs)(i.li,{children:["Los endpoints que disparan recalculos (",(0,d.jsx)(i.code,{children:"SurveySegmentation"}),", ",(0,d.jsx)(i.code,{children:"SurveyUserAccess"}),") invocan internamente ",(0,d.jsx)(i.code,{children:"SurveyRulesJobService"}),". Tras una operacion masiva, espere unos segundos antes de consultar KPIs para asegurar que el job termino."]}),"\n"]}),"\n",(0,d.jsx)(i.p,{children:"Con esta referencia puedes automatizar la integracion del frontend, crear scripts de mantenimiento o probar los servicios en herramientas como Postman/Insomnia respetando el contrato original del backend."})]})}function u(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,d.jsx)(i,{...e,children:(0,d.jsx)(t,{...e})}):t(e)}},8453:(e,i,s)=>{s.d(i,{R:()=>l,x:()=>c});var n=s(6540);const d={},r=n.createContext(d);function l(e){const i=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),n.createElement(r.Provider,{value:i},e.children)}}}]);